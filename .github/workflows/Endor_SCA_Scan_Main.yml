name: Endor Labs - SCA Scan on Main Branch
on:
  workflow_dispatch
    
jobs:
  scan-repo:
    runs-on: ubuntu-latest
    permissions:
      id-token: write
      contents: read
      pull-requests: write 
    steps:

        - name: Checkout Repository
          uses: actions/checkout@v3  
            
        - name: Endor Labs SCA Scan
          if: github.event_name == 'pull_request'
          uses: endorlabs/github-action@main
          with:
            namespace: "kriti-learn.team1"
            pr: true
            enable_github_action_token: true
            scan_dependencies: true
            pr: true
            enable_pr_comments: true
            github_token: ${{ secrets.GITHUB_TOKEN }}
